# ============================================================================
# VibeList Backend Environment Configuration (Monolith Architecture)
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
# ============================================================================

# Application
NODE_ENV=development
API_PREFIX=api/v1
ENABLE_SWAGGER=true

# Server
PORT=3000
CORS_ORIGIN=http://localhost:3000,http://localhost:19000,http://localhost:8081

# Database (PostgreSQL)
DATABASE_URL=postgresql://vibelist_user:vibelist_password@localhost:5432/vibelist
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=vibelist_user
DB_PASSWORD=vibelist_password
DB_DATABASE=vibelist
DB_SYNCHRONIZE=false # IMPORTANT: Set to false in production! Use migrations instead
DB_LOGGING=true # Enable SQL query logging in development
DB_SSL=false # Set to true only if PostgreSQL requires SSL (not needed for local Docker)

# JWT Authentication
# SECURITY: Generate strong secrets using: openssl rand -hex 64
JWT_SECRET=your-super-secret-jwt-key-change-in-production-minimum-64-characters
JWT_REFRESH_SECRET=your-super-secret-refresh-token-key-change-in-production-minimum-64-characters
JWT_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d

# OAuth 2.0 Configuration
# Google OAuth (for mobile Sign in with Google)
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
# Note: For mobile apps, you don't need GOOGLE_CLIENT_SECRET

# Apple OAuth (for mobile Sign in with Apple)
# Get credentials from: https://developer.apple.com/account/resources/identifiers/list/serviceId
APPLE_CLIENT_ID=com.yourapp.vibelist
# Note: Apple ID token verification is done using Apple's public keys

# Redis (for caching and Bull Queue)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_TTL=300
REDIS_URL=redis://localhost:6379

# ============================================================================
# PARSER MODULE - Integrated in Monolith
# ============================================================================
# Scrapfly includes built-in anti-bot protection, proxies, and JS rendering
# No additional proxy configuration needed!

# Scrapfly API (for web scraping with anti-bot protection)
# Get your API key from: https://scrapfly.io/dashboard
SCRAPFLY_API_KEY=scp-live-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Parser Configuration
PARSER_TIMEOUT=30000 # Maximum time to wait for parsing job completion (ms)

# ============================================================================
# NOTIFICATIONS
# ============================================================================

# Firebase Cloud Messaging (for push notifications)
# Get credentials from: Firebase Console > Project Settings > Service Accounts
FIREBASE_SERVICE_ACCOUNT_PATH=./firebase-admin-key.json
FCM_PROJECT_ID=your-firebase-project-id
FCM_PRIVATE_KEY=your-firebase-private-key
FCM_CLIENT_EMAIL=your-firebase-client-email@your-project.iam.gserviceaccount.com
FCM_DATABASE_URL=https://your-project-id.firebaseio.com

# Resend (for email notifications)
# Get your API key from: https://resend.com/api-keys
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxxxxxxx
RESEND_FROM_EMAIL=noreply@yourdomain.com

# Application URLs (for email links)
APP_URL=http://localhost:3000
FRONTEND_URL=http://localhost:3000

# ============================================================================
# SECURITY
# ============================================================================

# Password Hashing
BCRYPT_SALT_ROUNDS=10

# Security Headers
ENABLE_HELMET=true
ENABLE_CORS=true
COOKIE_SECRET=your-cookie-secret-change-in-production-minimum-32-characters

# Rate Limiting
RATE_LIMIT_TTL=60 # Time window in seconds
RATE_LIMIT_MAX_REQUESTS=100 # Max requests per time window

# ============================================================================
# FILE UPLOADS (Optional)
# ============================================================================

MAX_FILE_SIZE=5242880 # 5MB in bytes
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp
UPLOAD_DEST=./uploads

# AWS S3 (Optional - for cloud storage)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_S3_BUCKET=vibelist-images
AWS_S3_REGION=us-east-1

# Cloudinary (Optional - alternative to S3)
CLOUDINARY_CLOUD_NAME=your-cloudinary-cloud-name
CLOUDINARY_API_KEY=your-cloudinary-api-key
CLOUDINARY_API_SECRET=your-cloudinary-api-secret

# ============================================================================
# MONITORING & LOGGING
# ============================================================================

LOG_LEVEL=debug # Options: 'error', 'warn', 'info', 'debug', 'verbose'
ENABLE_QUERY_LOGGING=true

# Sentry (Optional - for error tracking)
SENTRY_DSN= # Get from: https://sentry.io/

# ============================================================================
# DEVELOPMENT TOOLS
# ============================================================================

SWAGGER_PATH=api/docs
ENABLE_PLAYGROUND=true

# ============================================================================
# TESTING
# ============================================================================

TEST_DATABASE_URL=postgresql://vibelist_user:vibelist_password@localhost:5432/vibelist_test

# ============================================================================
# DEPRECATED / REMOVED VARIABLES
# ============================================================================
# The following variables are no longer used in the monolith architecture:
#
# Microservices URLs (removed - now monolith):
# - AUTH_SERVICE_URL
# - USER_SERVICE_URL
# - WISHLIST_SERVICE_URL
# - FEED_SERVICE_URL
# - NOTIFICATION_SERVICE_URL
# - AUTH_SERVICE_PORT, USER_SERVICE_PORT, WISHLIST_SERVICE_PORT, etc.
#
# Old Parser Microservice (removed - now integrated):
# - LIGHT_PARSER_PORT
# - MEDIUM_PARSER_PORT
# - HEAVY_PARSER_PORT
# - ENABLE_HEAVY_PARSER
# - URL_PARSER_API_KEY
# - URL_PARSER_SERVICE_URL
#
# Old Email Config (removed - using Resend):
# - EMAIL_PROVIDER
# - EMAIL_API_KEY
# - SMTP_HOST, SMTP_PORT, SMTP_USER, SMTP_PASS
# - SENDGRID_API_KEY
# - AWS SES credentials (unless using for storage)
# ============================================================================
