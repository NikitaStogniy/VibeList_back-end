# ============================================================================
# VibeList Backend - PRODUCTION Environment Configuration
# ============================================================================
# This file contains production-specific settings
# Copy to .env.production and fill in your actual production values
# Deploy using: NODE_ENV=production
# ============================================================================

# Application
NODE_ENV=production
API_PREFIX=api/v1
ENABLE_SWAGGER=false # Disable Swagger in production for security

# Server
PORT=3000
# IMPORTANT: Add your production frontend URLs (comma-separated)
CORS_ORIGIN=https://vibelist.сс,https://www.vibelist.cc,https://app.vibelist.cc

# Database (PostgreSQL)
# IMPORTANT: Use your production database credentials
DATABASE_URL=postgresql://username:password@your-db-host:5432/vibelist
DB_HOST=your-db-host.amazonaws.com
DB_PORT=5432
DB_USERNAME=vibelist_prod_user
DB_PASSWORD=CHANGE-THIS-TO-STRONG-PASSWORD
DB_DATABASE=vibelist_production
DB_SYNCHRONIZE=false # CRITICAL: Must be false in production! Use migrations only
DB_LOGGING=false # Disable query logging in production for performance

# JWT Authentication
# SECURITY: Generate strong secrets using: openssl rand -hex 64
# NEVER use development secrets in production!
JWT_SECRET=GENERATE-64-CHARACTER-SECRET-HERE
JWT_REFRESH_SECRET=GENERATE-DIFFERENT-64-CHARACTER-SECRET-HERE
JWT_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d

# OAuth 2.0 Configuration
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
APPLE_CLIENT_ID=com.stogniy.vibelist

# Redis (for caching and Bull Queue)
# IMPORTANT: Use production Redis instance (AWS ElastiCache, Redis Cloud, etc.)
REDIS_HOST=your-redis-host.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_TTL=300
REDIS_URL=redis://:your-redis-password@your-redis-host:6379

# ============================================================================
# PARSER MODULE
# ============================================================================

# Scrapfly API
SCRAPFLY_API_KEY=scp-live-YOUR-PRODUCTION-KEY-HERE

# Anthropic API
ANTHROPIC_API_KEY=sk-ant-YOUR-PRODUCTION-KEY-HERE

# Parser Configuration
PARSER_TIMEOUT=30000

# ============================================================================
# PROXY CONFIGURATION
# ============================================================================

PROXY_ENABLED=true # Enable for production to avoid rate limits
PROXY_HOST=mobpool.proxy.market
PROXY_PORT=10000
PROXY_USERNAME=YOUR-PROXY-USERNAME
PROXY_PASSWORD=YOUR-PROXY-PASSWORD
PROXY_PROTOCOL=http
PROXY_MARKET_API_KEY=YOUR-PROXY-MARKET-API-KEY
PROXY_MARKET_API_URL=https://proxy.market/api/v1
PROXY_CACHE_TTL=300000

# ============================================================================
# NOTIFICATIONS
# ============================================================================

# Firebase Cloud Messaging
FIREBASE_SERVICE_ACCOUNT_PATH=./vibelist-firebase-adminsdk.json
FCM_PROJECT_ID=vibelist-84437
FCM_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR-PRIVATE-KEY-HERE\n-----END PRIVATE KEY-----\n"
FCM_CLIENT_EMAIL=firebase-adminsdk-xxxxx@vibelist-84437.iam.gserviceaccount.com
FCM_DATABASE_URL=https://vibelist-84437.firebaseio.com

# Resend (for email notifications)
RESEND_API_KEY=re_YOUR-PRODUCTION-KEY-HERE
RESEND_FROM_EMAIL=noreply@vibelist.cc

# Application URLs (for email links)
APP_URL=https://api.vibelist.cc
FRONTEND_URL=https://vibelist.cc

# ============================================================================
# SECURITY
# ============================================================================

# Password Hashing
BCRYPT_SALT_ROUNDS=12 # Increase for production

# Security Headers
ENABLE_HELMET=true
ENABLE_CORS=true
COOKIE_SECRET=GENERATE-32-CHARACTER-SECRET-HERE

# Rate Limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================================
# FILE UPLOADS
# ============================================================================

MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp
UPLOAD_DEST=./uploads

# AWS S3 (Recommended for production)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=YOUR-AWS-ACCESS-KEY
AWS_SECRET_ACCESS_KEY=YOUR-AWS-SECRET-KEY
AWS_S3_BUCKET=vibelist-production-images
AWS_S3_REGION=us-east-1

# ============================================================================
# MONITORING & LOGGING
# ============================================================================

LOG_LEVEL=info # Use 'info' or 'warn' in production (not 'debug')
ENABLE_QUERY_LOGGING=false # Disable for performance

# Sentry (Error tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ============================================================================
# PRODUCTION DEPLOYMENT NOTES
# ============================================================================
#
# 1. Database: Use managed PostgreSQL (AWS RDS, DigitalOcean, etc.)
# 2. Redis: Use managed Redis (AWS ElastiCache, Redis Cloud, etc.)
# 3. Secrets: Use AWS Secrets Manager or similar for sensitive data
# 4. SSL/TLS: Terminate SSL at load balancer or reverse proxy (nginx)
# 5. Monitoring: Set up Sentry, CloudWatch, or similar
# 6. Backups: Configure automated database backups
# 7. Scaling: Use PM2 or container orchestration (ECS, Kubernetes)
#
# ============================================================================
